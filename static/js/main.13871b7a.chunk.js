(this.webpackJsonptzbutton=this.webpackJsonptzbutton||[]).push([[0],{119:function(e,t){},273:function(e,t,n){e.exports=n(533)},278:function(e,t,n){},280:function(e,t,n){},285:function(e,t){},287:function(e,t){},297:function(e,t){},299:function(e,t){},325:function(e,t){},327:function(e,t){},328:function(e,t){},334:function(e,t){},336:function(e,t){},354:function(e,t){},357:function(e,t){},373:function(e,t){},376:function(e,t){},451:function(e,t){},453:function(e,t){},533:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(216),o=n.n(c),u=(n(278),n(217)),i=n(218),s=n(230),l=n(229),m=n(12),p=n.n(m),f=n(27),d=(n(280),n(228)),h=n(544),b=n(539),v=n(540),w=n(541),E=n(542),g=n(227),k=n(543),x=n(6),T=n(219),y=n(26),S=n(222),O="KT1H3Gk76yKvmiSBchKCgWpbHPRrQJq8JRV3";y.b.setProvider({rpc:"https://api.tez.ie/rpc/carthagenet"});var j=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new T.a({name:"TzButton"}),y.b.setWalletProvider(t),n={type:x.NetworkType.CARTHAGENET},e.next=5,t.requestPermissions({network:n});case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:return t=e.sent,e.next=5,t.client.requestOperation({operationDetails:[{kind:"transaction",amount:"200000",destination:O}]});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:return e.next=4,y.b.wallet.at(O);case 4:return t=e.sent,e.next=7,t.methods.withdraw("").send();case 7:return n=e.sent,e.abrupt("return",n.opHash);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function B(){return A.apply(this,arguments)}function A(){return(A=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return H.apply(this,arguments)}function H(){return(H=Object(f.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.b.contract.at(O);case 2:return t=e.sent,e.next=5,t.storage();case 5:return n=e.sent,console.log(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W="",D=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("checking for updates"),e.next=3,y.b.rpc.getBlock();case 3:return t=e.sent,n=t.hash!==W&&t.operations[3].some((function(e){return e.contents.some((function(e){return e.kind===y.a.TRANSACTION&&e.destination===O}))})),W=t.hash,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.open("https://carthagenet.tezblock.io/account/".concat(O),"_blank");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).refreshContractState=Object(f.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("refreshing"),e.next=3,P();case 3:return t=e.sent,n=new Date(t.leadership_start_timestamp),e.t0=r,e.next=8,y.b.tz.getBalance(O);case 8:e.t1=e.sent.shiftedBy(-6).toString(),e.t2=t.leader,e.t3=n,e.t4=r.getTargetTime(n),e.t5={loaded:!0,potAmount:e.t1,leader:e.t2,leaderStartTime:e.t3,leaderEndTime:e.t4},e.t0.setState.call(e.t0,e.t5);case 14:case"end":return e.stop()}}),e)}))),r.componentDidMount=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.refreshContractState();case 1:case"end":return e.stop()}}),e)}))),r.componentWillUnmount=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("unmounting");case 1:case"end":return e.stop()}}),e)}))),r.getTargetTime=function(e){return new Date(e.getTime()+1536e4)},r.state={loaded:!1,potAmount:"",leader:"",leaderStartTime:void 0,leaderEndTime:void 0},setInterval(Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:e.sent&&r.refreshContractState();case 4:case"end":return e.stop()}}),e)}))),1e4),r}return Object(i.a)(n,[{key:"render",value:function(){var e,t=function(){return a.a.createElement("span",null,"The game is over!",a.a.createElement("br",null),a.a.createElement(h.a,{onClick:C,colorScheme:"green",size:"sm"},"Withdraw"))},n=this.state.loaded?a.a.createElement(b.a,{color:"black"},a.a.createElement(v.a,{height:"500px"},a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(w.a,null,a.a.createElement(E.a,null,"TzButton")),a.a.createElement("br",null),a.a.createElement(w.a,null,a.a.createElement(E.a,{fontSize:"6xl"},this.state.leaderEndTime?a.a.createElement(S.a,{date:this.state.leaderEndTime,daysInHours:!0,zeroPadTime:2},a.a.createElement(t,null)):"Loading...")),a.a.createElement("br",null),a.a.createElement(w.a,null,a.a.createElement(E.a,{fontSize:"3xl"},"Price: ",this.state.potAmount," XTZ")),a.a.createElement("br",null),a.a.createElement(w.a,null,a.a.createElement(E.a,{fontSize:"xl"},"Leader: ",this.state.leader)),a.a.createElement("br",null),a.a.createElement(w.a,null,a.a.createElement(h.a,{onClick:B,colorScheme:"green",size:"lg"},"Button")),a.a.createElement("br",null),a.a.createElement("br",null),"Leadership start time: ",null===(e=this.state.leaderStartTime)||void 0===e?void 0:e.toString(),a.a.createElement("br",null),a.a.createElement(w.a,null,a.a.createElement(h.a,{onClick:I,colorScheme:"green",size:"sm"},"History")))):"Loading...";return a.a.createElement(g.ChakraProvider,{theme:d.a},a.a.createElement(k.a,null),a.a.createElement(a.a.Fragment,null,n))}}]),n}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[273,1,2]]]);
//# sourceMappingURL=main.13871b7a.chunk.js.map